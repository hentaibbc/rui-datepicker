window.ruiDatepicker=function(){var I=1920;"classList"in document.documentElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){var n=this;function e(r){return function(e){var t=n.className.split(/\s+/g),a=t.indexOf(e);r(t,a,e),n.className=t.join(" ")}}return{add:e(function(e,t,a){~t||e.push(a)}),remove:e(function(e,t){~t&&e.splice(t,1)}),toggle:e(function(e,t,a){~t?e.splice(t,1):e.push(a)}),contains:function(e){return!!~n.className.split(/\s+/g).indexOf(e)},item:function(e){return n.className.split(/\s+/g)[e]||null}}}});var e=function(){this.gearDate,this.minY=I,this.minM=1,this.minD=1,this.maxM=12,this.maxD=31,this.type=0,this.options={},this.options.enableUnknownHour=!1,this.maxY=Math.min((new Date).getFullYear()+1,2030)};return e.prototype={init:function(e,t){t=t||{},Object.keys(t).forEach(function(e){_self.options[e]=t[e]}),e instanceof Element?this.trigger=e:this.trigger=document.querySelector(e),this.bindEvent("date")},bindEvent:function(e){var f=this,M=[new a(50,0,3,53,0,1,0,0,1,0,0,1,0,1,1,1,1),new a(38,0,5,59,1,0,1,0,0,1,0,0,1,0,1,1,1),new a(27,5,6,4,1,0,1,1,0,0,1,0,0,1,0,1,1),new a(46,0,0,9,0,1,1,0,1,0,1,0,0,1,0,1,0),new a(35,0,1,14,0,1,1,0,1,1,0,1,0,1,0,0,1),new a(23,4,3,20,1,0,1,0,1,1,0,1,1,0,1,0,1),new a(43,0,4,25,0,0,1,0,1,0,1,1,0,1,1,0,1),new a(32,0,5,30,1,0,0,1,0,1,0,1,0,1,1,1,0),new a(22,2,6,35,0,1,0,0,1,0,0,1,0,1,1,1,1),new a(40,0,1,41,0,1,0,0,1,0,0,1,0,1,1,1,0),new a(29,6,2,46,0,1,1,0,0,1,0,0,1,0,1,1,0),new a(47,0,3,51,1,1,0,1,0,1,0,0,1,0,1,0,1),new a(36,0,4,56,1,1,1,0,1,0,1,0,0,1,0,1,0),new a(25,5,6,2,0,1,1,0,1,1,0,1,0,1,0,0,1),new a(44,0,0,7,0,1,0,1,1,0,1,0,1,1,0,1,0),new a(34,0,1,12,0,0,1,0,1,0,1,1,0,1,1,0,1),new a(23,3,2,17,1,0,0,1,0,0,1,1,0,1,1,1,0),new a(41,0,4,23,1,0,0,1,0,0,1,0,1,1,1,0,1),new a(30,7,5,28,1,1,0,0,1,0,0,1,0,1,1,0,1),new a(49,0,6,33,1,1,0,0,1,0,0,1,0,1,0,1,1),new a(38,0,0,38,1,1,0,1,0,1,0,0,1,0,1,0,1),new a(26,6,2,44,1,1,0,1,1,0,1,0,0,1,0,1,0),new a(45,0,3,49,1,0,1,1,0,1,0,1,0,1,0,1,0),new a(35,0,4,54,0,1,0,1,0,1,1,0,1,0,1,0,1),new a(24,4,5,59,1,0,1,0,1,0,1,0,1,1,0,1,1),new a(43,0,0,5,0,0,1,0,0,1,0,1,1,1,0,1,1),new a(32,0,1,10,1,0,0,1,0,0,1,0,1,1,0,1,1),new a(21,2,2,15,1,1,0,0,1,0,0,1,0,1,0,1,1),new a(40,0,3,20,1,0,1,0,1,0,0,1,0,1,0,1,1),new a(28,7,5,26,1,0,1,1,0,1,0,0,1,0,1,0,1),new a(47,0,6,31,0,1,1,0,1,1,0,0,1,0,1,0,1),new a(36,0,0,36,1,0,1,1,0,1,0,1,0,1,0,1,0),new a(26,5,1,41,0,1,0,1,0,1,0,1,1,0,1,0,1),new a(44,0,3,47,0,1,0,0,1,1,0,1,1,0,1,0,1),new a(33,0,4,52,1,0,1,0,0,1,0,1,1,0,1,1,0),new a(23,3,5,57,0,1,0,1,0,0,1,0,1,0,1,1,1),new a(42,0,6,2,0,1,0,1,0,0,1,0,1,0,1,1,1),new a(30,8,1,8,1,0,1,0,1,0,0,1,0,1,0,1,0),new a(48,0,2,13,1,1,1,0,1,0,0,1,0,1,0,1,0),new a(38,0,3,18,0,1,1,0,1,0,1,0,1,0,1,0,1),new a(27,6,4,23,1,0,1,0,1,1,0,1,0,1,0,1,0),new a(45,0,6,29,1,0,1,0,1,0,1,1,0,1,0,1,0),new a(35,0,0,34,0,1,0,0,1,0,1,1,0,1,1,0,1),new a(24,4,1,39,1,0,1,0,0,1,0,1,0,1,1,1,0),new a(43,0,2,44,1,0,1,0,0,1,0,1,0,1,1,1,0),new a(32,0,4,50,0,1,0,1,0,0,1,0,0,1,1,0,1),new a(20,3,5,55,1,1,1,0,1,0,0,1,0,0,1,1,0),new a(39,0,6,0,1,1,0,1,1,0,0,1,0,1,0,1,0),new a(29,7,0,5,0,1,0,1,1,0,1,0,1,0,1,0,1),new a(47,0,2,11,0,1,0,1,0,1,1,0,1,0,1,0,1),new a(36,0,3,16,1,0,0,1,0,1,1,0,1,1,0,1,0),new a(26,5,4,21,0,1,0,0,1,0,1,0,1,1,1,0,1),new a(45,0,5,26,0,1,0,0,1,0,1,0,1,1,0,1,1),new a(33,0,0,32,1,0,1,0,0,1,0,0,1,1,0,1,1),new a(22,4,1,37,1,1,0,1,0,0,1,0,0,1,1,0,1),new a(41,0,2,42,1,1,0,1,0,0,1,0,0,1,0,1,1),new a(30,8,3,47,1,1,0,1,0,1,0,1,0,0,1,0,1),new a(48,0,5,53,1,0,1,1,0,1,0,1,0,1,0,0,1),new a(37,0,6,58,1,0,1,1,0,1,1,0,1,0,1,0,1),new a(27,6,0,3,1,0,0,1,0,1,1,0,1,1,0,1,0),new a(46,0,1,8,1,0,0,1,0,1,0,1,1,0,1,1,0),new a(35,0,3,14,0,1,0,0,1,0,0,1,1,0,1,1,1),new a(24,4,4,19,1,0,1,0,0,1,0,0,1,0,1,1,1),new a(43,0,5,24,1,0,1,0,0,1,0,0,1,0,1,1,1),new a(32,10,6,29,1,0,1,1,0,0,1,0,0,1,0,1,1),new a(50,0,1,35,0,1,1,0,1,0,1,0,0,1,0,1,0),new a(39,0,2,40,0,1,1,0,1,1,0,1,0,1,0,0,1),new a(28,6,3,45,1,0,1,0,1,1,0,1,1,0,1,0,0),new a(47,0,4,50,1,0,1,0,1,0,1,1,0,1,1,0,1),new a(36,0,6,56,1,0,0,1,0,1,0,1,0,1,1,1,0),new a(26,5,0,1,0,1,0,0,1,0,0,1,0,1,1,1,1),new a(45,0,1,6,0,1,0,0,1,0,0,1,0,1,1,1,0),new a(34,0,2,11,0,1,1,0,0,1,0,0,1,0,1,1,0),new a(22,3,4,17,0,1,1,0,1,0,1,0,0,1,0,1,0),new a(40,0,5,22,1,1,1,0,1,0,1,0,0,1,0,1,0),new a(30,8,6,27,0,1,1,0,1,0,1,1,0,0,1,0,1),new a(49,0,0,32,0,1,0,1,1,0,1,0,1,1,0,0,1),new a(37,0,2,38,1,0,1,0,1,0,1,1,0,1,1,0,1),new a(27,5,3,43,1,0,0,1,0,0,1,1,0,1,1,0,1),new a(46,0,4,48,1,0,0,1,0,0,1,0,1,1,1,0,1),new a(35,0,5,53,1,1,0,0,1,0,0,1,0,1,1,0,1),new a(23,4,0,59,1,1,0,1,0,1,0,0,1,0,1,0,1),new a(42,0,1,4,1,1,0,1,0,1,0,0,1,0,1,0,1),new a(31,0,2,9,1,1,0,1,1,0,1,0,0,1,0,1,0),new a(21,2,3,14,0,1,0,1,1,0,1,0,1,0,1,0,1),new a(39,0,5,20,0,1,0,1,0,1,1,0,1,0,1,0,1),new a(28,7,6,25,1,0,1,0,1,0,1,0,1,1,0,1,1),new a(48,0,0,30,0,0,1,0,0,1,0,1,1,1,0,1,1),new a(37,0,1,35,1,0,0,1,0,0,1,0,1,1,0,1,1),new a(25,5,3,41,1,1,0,0,1,0,0,1,0,1,0,1,1),new a(44,0,4,46,1,0,1,0,1,0,0,1,0,1,0,1,1),new a(33,0,5,51,1,0,1,1,0,1,0,0,1,0,1,0,1),new a(22,4,6,56,1,0,1,1,0,1,0,1,0,1,0,1,0),new a(40,0,1,2,1,0,1,0,1,1,0,1,0,1,0,1,0),new a(30,9,2,7,0,1,0,1,0,1,0,1,1,0,1,0,1),new a(49,0,3,12,0,1,0,0,1,0,1,1,1,0,1,0,1),new a(38,0,4,17,1,0,1,0,0,1,0,1,1,0,1,1,0),new a(27,6,6,23,0,1,0,1,0,0,1,0,1,0,1,1,1),new a(46,0,0,28,0,1,0,1,0,0,1,0,1,0,1,1,0),new a(35,0,1,33,1,0,1,0,1,0,0,1,0,0,1,1,0),new a(24,4,2,38,0,1,1,1,0,1,0,0,1,0,1,0,1),new a(42,0,4,44,0,1,1,0,1,0,1,0,1,0,1,0,1),new a(31,0,5,49,1,0,1,0,1,1,0,1,0,1,0,1,0),new a(21,2,6,54,0,1,0,1,0,1,0,1,1,0,1,0,1),new a(40,0,0,59,0,1,0,0,1,0,1,1,0,1,1,0,1),new a(28,6,2,5,1,0,1,0,0,1,0,1,0,1,1,1,0),new a(47,0,3,10,1,0,1,0,0,1,0,0,1,1,1,0,1),new a(36,0,4,15,1,1,0,1,0,0,1,0,0,1,1,0,1),new a(25,5,5,20,1,1,1,0,1,0,0,1,0,0,1,1,0),new a(43,0,0,26,1,1,0,1,0,1,0,1,0,0,1,0,1),new a(32,0,1,31,1,1,0,1,1,0,1,0,1,0,1,0,0),new a(23,3,2,36,0,1,1,0,1,0,1,1,0,1,0,1,0),new a(42,0,3,41,1,0,0,1,0,1,1,0,1,1,0,1,0),new a(31,11,5,47,0,1,0,0,1,0,1,0,1,1,1,0,1),new a(50,0,6,52,0,1,0,0,1,0,1,0,1,1,0,1,1),new a(39,0,0,57,1,0,1,0,0,1,0,0,1,1,0,1,1),new a(28,6,1,2,1,1,0,1,0,0,1,0,0,1,0,1,1),new a(46,0,3,8,1,1,0,1,0,0,1,0,0,1,0,1,1),new a(35,0,4,13,1,1,0,1,0,1,0,1,0,0,1,0,1),new a(24,5,5,18,1,1,0,1,1,0,1,0,1,0,1,0,0),new a(43,0,6,23,1,0,1,1,0,1,0,1,1,0,1,0,0),new a(32,0,1,29,0,1,0,1,0,1,1,0,1,1,0,1,0),new a(22,2,2,34,0,1,0,0,1,0,1,0,1,1,0,1,1),new a(41,0,3,39,0,1,0,0,1,0,0,1,1,0,1,1,1),new a(30,7,4,44,1,0,1,0,0,1,0,0,1,0,1,1,1),new a(48,0,6,50,1,0,1,0,0,1,0,0,1,0,1,1,1),new a(37,0,0,55,1,0,1,0,1,0,1,0,0,1,0,1,1),new a(26,5,1,0,1,0,1,1,0,1,0,1,0,0,1,0,1),new a(45,0,2,5,0,1,1,0,1,1,0,1,0,0,1,0,1),new a(33,0,4,11,1,0,1,0,1,1,0,1,1,0,1,0,0),new a(23,3,5,16,0,1,0,1,0,1,0,1,1,0,1,1,0)];function t(e){document.activeElement.blur(),f.gearDate=document.createElement("div"),f.gearDate.className="gearDate",f.trigger.getAttribute("data-toid-hour")?f.gearDate.innerHTML='<div class="date_ctrl bounceInUp"><div class="date_btn_wrap"><div class="date_btn lcalendar_cancel">取消</div><div class="date_btn lcalendar_finish">完成</div></div><div class="date_choice_wrap"><div class="date_class_box"><div class="date_class lcalendar_gongli">公历</div><div class="date_class lcalendar_nongli">农历</div></div><div class="date_roll_mask"><div class="date_roll date_roll_more"><div><div class="gear date_yy" data-datetype="date_yy"></div><div class="date_grid"></div></div><div><div class="gear date_mm" data-datetype="date_mm"></div><div class="date_grid"></div></div><div><div class="gear date_dd" data-datetype="date_dd"></div><div class="date_grid"></div></div><div><div class="gear date_hh" data-datetype="date_hh"></div><div class="date_grid"></div></div></div></div></div><div class="date_confirm_wrap"><div class="confirm_tit">请确认输入的时间是否正确</div><div class="confirm_p">公历：<b class="confirm_gongli"></b></div><div class="confirm_p">农历：<b class="confirm_nongli"></b></div></div></div>':f.gearDate.innerHTML='<div class="date_ctrl bounceInUp"><div class="date_btn_wrap"><div class="date_btn lcalendar_cancel">取消</div><div class="date_btn lcalendar_finish" data-isconfirm="0">完成</div></div><div class="date_choice_wrap"><div class="date_class_box"><div class="date_class lcalendar_gongli">公历</div><div class="date_class lcalendar_nongli">农历</div></div><div class="date_roll_mask"><div class="date_roll"><div><div class="gear date_yy" data-datetype="date_yy"></div><div class="date_grid"></div></div><div><div class="gear date_mm" data-datetype="date_mm"></div><div class="date_grid"></div></div><div><div class="gear date_dd" data-datetype="date_dd"></div><div class="date_grid"></div></div></div></div></div><div class="date_confirm_wrap"><div class="confirm_tit">请确认输入的时间是否正确</div><div class="confirm_p">公历：<b class="confirm_gongli"></b></div><div class="confirm_p">农历：<b class="confirm_nongli"></b></div></div></div>',document.body.appendChild(f.gearDate),function(){var e=new Date,t={yy:e.getYear(),mm:e.getMonth(),dd:e.getDate()-1};if(/^\d{4}-\d{1,2}-\d{1,2}$/.test(f.trigger.getAttribute("data-date"))){var a=f.trigger.getAttribute("data-date").match(/(^|-)\d{1,4}/g);t.yy=a[0]-f.minY,t.mm=a[1].replace(/-/g,"")-1,t.dd=a[2].replace(/-/g,"")-1}else t.yy=t.yy+1875-f.minY,t.mm=6,t.dd=0;if(f.gearDate.querySelector(".date_yy").setAttribute("val",t.yy),f.gearDate.querySelector(".date_mm").setAttribute("val",t.mm),f.gearDate.querySelector(".date_dd").setAttribute("val",t.dd),f.gearDate.querySelector(".date_hh")){var r=0;f.trigger.getAttribute("data-hour")&&0<=f.trigger.getAttribute("data-hour")&&(r=f.options.enableUnknownHour?parseInt(Math.round(f.trigger.getAttribute("data-hour"))+1):parseInt(Math.round(f.trigger.getAttribute("data-hour")))),f.gearDate.querySelector(".date_hh").setAttribute("val",r)}if(parseInt(f.trigger.getAttribute("data-type"))){f.type=1;var n=f.gearDate.querySelector(".lcalendar_nongli");n.className=n.className.replace(/active/,"").replace(/(^\s*)|(\s*$)/g,"")+" active";var i=f.maxY-f.minY+1,s=t.yy%i+f.minY,d=t.mm+1,o=t.dd+1,l=u(0,s,d,o),c=M[l.yy-f.minY].Intercalation?M[l.yy-f.minY].Intercalation:0;l.mm<0?l.mm=1-l.mm:c&&l.mm-1>=c&&(l.mm=l.mm+1),f.gearDate.querySelector(".date_yy").setAttribute("val",l.yy-f.minY),f.gearDate.querySelector(".date_mm").setAttribute("val",l.mm-1),f.gearDate.querySelector(".date_dd").setAttribute("val",l.dd-1)}else{f.type=0;var m=f.gearDate.querySelector(".lcalendar_gongli");m.className=m.className.replace(/active/,"").replace(/(^\s*)|(\s*$)/g,"")+" active"}v()}();var t="ontouchstart"in window;f.gearDate.querySelector(".lcalendar_cancel").addEventListener(t?"touchstart":"click",g),f.gearDate.querySelector(".lcalendar_finish").addEventListener(t?"touchstart":"click",w);var a=f.gearDate.querySelector(".lcalendar_gongli"),r=f.gearDate.querySelector(".lcalendar_nongli");a.addEventListener(t?"touchstart":"click",function(){o("gongli")},!1),r.addEventListener(t?"touchstart":"click",function(){o("nongli")},!1);var n=f.gearDate.querySelector(".date_yy"),i=f.gearDate.querySelector(".date_mm"),s=f.gearDate.querySelector(".date_dd"),d=f.gearDate.querySelector(".date_hh");n.addEventListener("touchstart",m),i.addEventListener("touchstart",m),s.addEventListener("touchstart",m),d&&d.addEventListener("touchstart",m),n.addEventListener("mousedown",c),i.addEventListener("mousedown",c),s.addEventListener("mousedown",c),d&&d.addEventListener("mousedown",c),n.addEventListener("touchmove",_),i.addEventListener("touchmove",_),s.addEventListener("touchmove",_),d&&d.addEventListener("touchmove",_),n.addEventListener("touchend",y),i.addEventListener("touchend",y),s.addEventListener("touchend",y),d&&d.addEventListener("touchend",y),f.gearDate.addEventListener("touchmove",function(e){e.preventDefault()}),0<navigator.userAgent.indexOf("Firefox")?(f.gearDate.addEventListener("DOMMouseScroll",function(e){e.preventDefault()},!1),n.addEventListener("DOMMouseScroll",l,!1),i.addEventListener("DOMMouseScroll",l,!1),s.addEventListener("DOMMouseScroll",l,!1),d&&d.addEventListener("DOMMouseScroll",l,!1)):(f.gearDate.onmousewheel=function(e){return!1},n.onmousewheel=l,i.onmousewheel=l,s.onmousewheel=l,d&&(d.onmousewheel=l))}function o(e){var t=f.gearDate.querySelector(".lcalendar_nongli"),a=f.gearDate.querySelector(".lcalendar_gongli"),r=0;if("nongli"==e&&1!=f.type?(t.className=t.className.replace(/active/,"").replace(/(^\s*)|(\s*$)/g,"")+" active",a.className=a.className.replace(/active/,""),r=f.type=1):"gongli"==e&&0!=f.type&&(t.className=t.className.replace(/active/,""),a.className=a.className.replace(/active/,"").replace(/(^\s*)|(\s*$)/g,"")+" active",f.type=0,r=1),r){var n=f.maxY-f.minY+1,i=parseInt(Math.round(f.gearDate.querySelector(".date_yy").getAttribute("val"))),s=parseInt(Math.round(f.gearDate.querySelector(".date_mm").getAttribute("val")))+1,d=parseInt(Math.round(f.gearDate.querySelector(".date_dd").getAttribute("val")))+1,o=i%n+f.minY,l=(e=f.type?0:1,M[i].Intercalation?M[i].Intercalation:0);!f.type&&l&&(l==s-1?s=-(s-1):l<s-1?s-=1:s=s);var c=u(e,o,s,d),m=M[c.yy-f.minY].Intercalation?M[c.yy-f.minY].Intercalation:0;m&&f.type&&(c.mm<0?c.mm=1-c.mm:c.mm>m&&(c.mm=c.mm+1)),f.gearDate.querySelector(".date_yy").setAttribute("val",c.yy-f.minY),f.gearDate.querySelector(".date_mm").setAttribute("val",c.mm-1),f.gearDate.querySelector(".date_dd").setAttribute("val",c.dd-1),f.gearDate.querySelector(".date_yy").setAttribute("top",""),v()}}function v(){var e=f.maxY-f.minY+1,t=f.gearDate.querySelector(".date_yy"),a="";if(t&&t.getAttribute("val")){for(var r=parseInt(t.getAttribute("val")),n=0;n<=e-1;n++)a+="<div class='tooth'>"+(f.minY+n)+"年</div>";t.innerHTML=a;var i=Math.floor(parseFloat(t.getAttribute("top")));if(isNaN(i))t.style.transform="translate(0,"+(8-2*r)+"em)",t.style["-webkit-transform"]="translate(0,"+(8-2*r)+"em)",t.style["-moz-transform"]="translate(0,"+(8-2*r)+"em)",t.style["-ms-transform"]="translate(0,"+(8-2*r)+"em)",t.style["-o-transform"]="translate(0,"+(8-2*r)+"em)",t.setAttribute("top",8-2*r+"em");else{i%2==0?i=i:i+=1,8<i&&(i=8);var s=8-2*(e-1);i<s&&(i=s),t.style.transform="translate(0,"+i+"em)",t.style["-webkit-transform"]="translate(0,"+i+"em)",t.style["-moz-transform"]="translate(0,"+i+"em)",t.style["-ms-transform"]="translate(0,"+i+"em)",t.style["-o-transform"]="translate(0,"+i+"em)",t.setAttribute("top",i+"em"),r=Math.abs(i-8)/2,t.setAttribute("val",r)}var d=f.gearDate.querySelector(".date_mm");if(d&&d.getAttribute("val")){a="";var o=parseInt(d.getAttribute("val")),l=M[r].Intercalation?M[r].Intercalation:0;if(l&&f.type)var c=12;else c=11;var m=0;r==e-1&&(c=(f.type,f.maxM-1)),0==r&&(m=f.type?f.minM-1:f.minM);for(n=0;n<c-m+1;n++){var v=m+n+1;f.type?a+="<div class='tooth'>"+(v=l&&l==n?b("rm",v-1):b("mm",l&&l<n?v-1:v))+"</div>":a+="<div class='tooth'>"+v+"月</div>"}d.innerHTML=a,c<o?(o=c,d.setAttribute("val",o)):o<m&&(o=c,d.setAttribute("val",o)),d.style.transform="translate(0,"+(8-2*(o-m))+"em)",d.style["-webkit-transform"]="translate(0,"+(8-2*(o-m))+"em)",d.style["-moz-transform"]="translate(0,"+(8-2*(o-m))+"em)",d.style["-ms-transform"]="translate(0,"+(8-2*(o-m))+"em)",d.style["-o-transform"]="translate(0,"+(8-2*(o-m))+"em)",d.setAttribute("top",8-2*(o-m)+"em");var u=f.gearDate.querySelector(".date_dd");if(u&&u.getAttribute("val")){a="";var _=parseInt(u.getAttribute("val")),y=h(r,o)-1,g=0;r==e-1&&12==o+1&&(y=f.type?f.maxD-15:f.maxD-1),0==r&&2==o+1&&(g=f.type?f.minD-1:f.minD+6);for(n=0;n<y-g+1;n++){a+="<div class='tooth'>"+(v=f.type?b("dd",g+n+1):g+n+1+"日")+"</div>"}u.innerHTML=a,y<_?(_=y,u.setAttribute("val",_)):_<g&&(_=g,u.setAttribute("val",_)),u.style.transform="translate(0,"+(8-2*(_-g))+"em)",u.style["-webkit-transform"]="translate(0,"+(8-2*(_-g))+"em)",u.style["-moz-transform"]="translate(0,"+(8-2*(_-g))+"em)",u.style["-ms-transform"]="translate(0,"+(8-2*(_-g))+"em)",u.style["-o-transform"]="translate(0,"+(8-2*(_-g))+"em)",u.setAttribute("top",8-2*(_-g)+"em");var p=f.gearDate.querySelector(".date_hh");if(p&&p.getAttribute("val")){var w=parseInt(p.getAttribute("val"));a=f.options.enableUnknownHour?"<div class='tooth'>未知</div>":"";for(n=0;n<24;n++){a+="<div class='tooth'>"+(v=f.type?b("hh",n):n)+"时</div>"}p.innerHTML=a,p.style.transform="translate(0,"+(8-2*w)+"em)",p.style["-webkit-transform"]="translate(0,"+(8-2*w)+"em)",p.style["-moz-transform"]="translate(0,"+(8-2*w)+"em)",p.style["-ms-transform"]="translate(0,"+(8-2*w)+"em)",p.style["-o-transform"]="translate(0,"+(8-2*w)+"em)",p.setAttribute("top",8-2*w+"em")}D()}}}}function h(e,t){return 1==f.type?M[e].MonthDays[t]?30:29:1==t?(e+=f.minY)%4==0&&e%100!=0||e%400==0&&e%4e3!=0?29:28:3==t||5==t||8==t||10==t?30:31}function b(e,t){return"rm"==e?["闰正月","闰二月","闰三月","闰四月","闰五月","闰六月","闰七月","闰八月","闰九月","闰十月","闰冬月","闰腊月"][t-1]:"mm"==e?["正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][t-1]:"dd"==e?["初一","初二","初三","初四","初五","初六","初七","初八","初九","初十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十","廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十","三十一"][t-1]:"hh"==e?["0子","1丑","2丑","3寅","4寅","5卯","6卯","7辰","8辰","9巳","10巳","11午","12午","13未","14未","15申","16申","17酉","18酉","19戌","20戌","21亥","22亥","23子"][t]:"hhh"==e?["子","丑","丑","寅","寅","卯","卯","辰","辰","巳","巳","午","午","未","未","申","申","酉","酉","戌","戌","亥","亥","子"][t]:void 0}function u(e,t,a,r){var n=t,i=a,s=r,d=[0,31,59,90,120,151,181,212,243,273,304,334,365,396,0,31,60,91,121,152,182,213,244,274,305,335,366,397];if(0==e){var o=parseInt(n),l=parseInt(i),c=parseInt(s),m=l-1,v=S(o),u=((D=d[14*v+m]+c)+M[f=o-I].BaseKanChih)%60;if(u=u<22?22-u:82-u,(u+=3)<10&&(u+=60),D<=M[f].BaseDays)f--,D=d[14*(v=S(_=o-1))+(m+=12)]+c;else var _=o;var y=M[f].BaseDays;for(A=0;A<13;A++){var g=y+M[f].MonthDays[A]+29;if(D<=g)break;y=g}var p=A+1,w=D-y;return 0!=(h=M[f].Intercalation)&&h<p&&--p==h&&(p=-h),12<p&&(p-=12),{yy:_,mm:p,dd:w}}_=parseInt(n),p=parseInt(i),w=parseInt(s);var f,h,b=p;0!=(h=M[f=_-I].Intercalation)&&(h<b?b++:b==-h&&(b=h+1)),b--;for(var D=0,A=0;A<b;A++)D+=M[f].MonthDays[A]+29;D+=M[f].BaseDays+w;for(v=S(_),A=13;0<=A&&!(d[14*v+A]<D);A--);if(A<=11)o=_,l=A+1;else o=_+1,l=A-11;return{yy:o,mm:l,dd:c=D-d[14*v+A]}}function S(e){return e%400==0?1:e%100==0?0:e%4==0?1:0}function a(e,t,a,r,n,i,s,d,o,l,c,m,v,u,_,y,g){this.BaseDays=e,this.Intercalation=t,this.BaseWeekday=a,this.BaseKanChih=r,this.MonthDays=[n,i,s,d,o,l,c,m,v,u,_,y,g]}function l(e){var t=((e=e||event).wheelDelta?0<e.wheelDelta:e.detail<0)?21:-21;e.preventDefault();for(var a=e.target;!a.classList.contains("gear");)a=a.parentElement;clearInterval(a["int_"+a.id]),a["old_"+a.id]=0,a["o_t_"+a.id]=(new Date).getTime();var r=a.getAttribute("top");a["o_d_"+a.id]=r?parseFloat(r.replace(/em/g,"")):0,a["new_"+a.id]=t,a["n_t_"+a.id]=(new Date).getTime()+360;var n=18*(a["new_"+a.id]-a["old_"+a.id])/370;a["pos_"+a.id]=a["o_d_"+a.id]+n,a.setAttribute("top",a["pos_"+a.id]+"em");var i=(a["new_"+a.id]-a["old_"+a.id])/(a["n_t_"+a.id]-a["o_t_"+a.id]);return Math.abs(i)<=.2?a["spd_"+a.id]=i<0?-.08:.08:Math.abs(i)<=.5?a["spd_"+a.id]=i<0?-.16:.16:a["spd_"+a.id]=i/2,a["pos_"+a.id]||(a["pos_"+a.id]=0),e.preventDefault&&e.preventDefault(),s(a),!1}function c(e){e.preventDefault();for(var t=e.target,r=t,n=!1;!t.classList.contains("gear");)t=t.parentElement;clearInterval(t["int_"+t.id]),t["old_"+t.id]=e.screenY,t["o_t_"+t.id]=(new Date).getTime();var a=t.getAttribute("top");t["o_d_"+t.id]=a?parseFloat(a.replace(/em/g,"")):0,document.onmousemove=function(e){n=!0,(e=e||window.event).preventDefault();for(var t=r;t&&!t.classList.contains("gear");)t=t.parentElement;if(t){t["new_"+t.id]=e.screenY,t["n_t_"+t.id]=(new Date).getTime();var a=18*(t["new_"+t.id]-t["old_"+t.id])/370;t["pos_"+t.id]=t["o_d_"+t.id]+a,t.style.transform="translate(0,"+t["pos_"+t.id]+"em)",t.style["-webkit-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-moz-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-ms-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-o-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.setAttribute("top",t["pos_"+t.id]+"em")}},document.onmouseup=function(e){if(!n)return document.onmousemove=null,document.onmouseup=null,!1;(e=e||window.event).preventDefault();for(var t=r;t&&!t.classList.contains("gear");)t=t.parentElement;if(t){var a=(t["new_"+t.id]-t["old_"+t.id])/(t["n_t_"+t.id]-t["o_t_"+t.id]);Math.abs(a)<=.2?t["spd_"+t.id]=a<0?-.08:.08:Math.abs(a)<=.5?t["spd_"+t.id]=a<0?-.16:.16:t["spd_"+t.id]=a/2,t["pos_"+t.id]||(t["pos_"+t.id]=0),s(t),document.onmousemove=null,document.onmouseup=null}}}function m(e){e.preventDefault();var t=e.target;for(t.touchTip=!1;!t.classList.contains("gear");)t=t.parentElement;clearInterval(t["int_"+t.id]),t["old_"+t.id]=e.targetTouches[0].screenY,t["o_t_"+t.id]=(new Date).getTime();var a=t.getAttribute("top");t["o_d_"+t.id]=a?parseFloat(a.replace(/em/g,"")):0}function _(e){e.preventDefault();var t=e.target;for(t.touchTip=!0;!t.classList.contains("gear");)t=t.parentElement;t["new_"+t.id]=e.targetTouches[0].screenY,t["n_t_"+t.id]=(new Date).getTime();var a=18*(t["new_"+t.id]-t["old_"+t.id])/370;t["pos_"+t.id]=t["o_d_"+t.id]+a,t.style.transform="translate(0,"+t["pos_"+t.id]+"em)",t.style["-webkit-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-moz-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-ms-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-o-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.setAttribute("top",t["pos_"+t.id]+"em")}function y(e){e.preventDefault();var t=e.target;if(!t.touchTip)return!1;for(;!t.classList.contains("gear");)t=t.parentElement;var a=(t["new_"+t.id]-t["old_"+t.id])/(t["n_t_"+t.id]-t["o_t_"+t.id]);Math.abs(a)<=.2?t["spd_"+t.id]=a<0?-.08:.08:Math.abs(a)<=.5?t["spd_"+t.id]=a<0?-.16:.16:t["spd_"+t.id]=a/2,t["pos_"+t.id]||(t["pos_"+t.id]=0),s(t)}function s(u){var _=0,y=!1,g=f.maxY-f.minY+1;clearInterval(u["int_"+u.id]),u["int_"+u.id]=setInterval(function(){var e=u["pos_"+u.id],t=u["spd_"+u.id]*Math.exp(-.03*_);if(e+=t,.1<Math.abs(t));else{t=.1;var a=2*Math.round(e/2);Math.abs(e-a)<.02?y=!0:a<e?e-=t:e+=t}switch(8<e&&(e=8,y=!0),u.getAttribute("data-datetype")){case"date_yy":if(e<(v=8-2*(g-1))&&(e=v,y=!0),y){var r=Math.abs(e-8)/2;p(u,r),clearInterval(u["int_"+u.id])}break;case"date_mm":var n=f.gearDate.querySelector(".date_yy"),i=parseInt(n.getAttribute("val"));if((M[i].Intercalation?M[i].Intercalation:0)&&f.type)var s=12;else s=11;var d=0;if(i==g-1&&(s=(f.type,f.maxM-1)),0==i&&(d=f.type?f.minM-1:f.minM),e<(v=8-2*(s-d))&&(e=v,y=!0),y){r=Math.abs(e-8)/2+d;p(u,r),clearInterval(u["int_"+u.id])}break;case"date_dd":n=f.gearDate.querySelector(".date_yy");var o=f.gearDate.querySelector(".date_mm"),l=(i=parseInt(n.getAttribute("val")),parseInt(o.getAttribute("val"))),c=h(i,l)-1,m=0;if(i==g-1&&12==l+1&&(c=f.type?f.maxD-15:f.maxD-1),0==i&&2==l+1&&(m=f.type?f.minD-1:f.minD+6),e<(v=8-2*(c-m))&&(e=v,y=!0),y){r=Math.abs(e-8)/2+m;p(u,r),clearInterval(u["int_"+u.id])}break;case"date_hh":if(f.options.enableUnknownHour)var v=-40;else v=-38;if(e<v&&(e=v,y=!0),y){r=Math.abs(e-8)/2;p(u,r),clearInterval(u["int_"+u.id])}}u["pos_"+u.id]=e,u.style.transform="translate(0,"+e+"em)",u.style["-webkit-transform"]="translate(0,"+e+"em)",u.style["-moz-transform"]="translate(0,"+e+"em)",u.style["-ms-transform"]="translate(0,"+e+"em)",u.style["-o-transform"]="translate(0,"+e+"em)",u.setAttribute("top",e+"em"),_++},6)}function p(e,t){t=Math.round(t),e.setAttribute("val",t),v()}function g(e,t){var a=f.gearDate.querySelector(".lcalendar_finish"),r=f.gearDate.querySelector(".lcalendar_cancel");try{e.preventDefault()}catch(e){}if(a.getAttribute("data-isconfirm")-0&&!t)return D(),a.setAttribute("data-isconfirm",0),f.gearDate.querySelector(".date_choice_wrap").style.display="block",f.gearDate.querySelector(".date_confirm_wrap").style.display="none",a.innerHTML="完成",!(r.innerHTML="取消");if("function"==typeof window.CustomEvent){var n=new CustomEvent("input");f.trigger.dispatchEvent(n)}document.body.removeChild(f.gearDate)}function w(e){var t=D(),a=f.gearDate.querySelector(".lcalendar_finish"),r=f.gearDate.querySelector(".lcalendar_cancel");if(!(a.getAttribute("data-isconfirm")-0)&&"true"==f.trigger.getAttribute("data-confirm")){var n=f.gearDate.querySelector(".confirm_nongli"),i=f.gearDate.querySelector(".confirm_gongli");f.gearDate.querySelector(".date_choice_wrap").style.display="none",f.gearDate.querySelector(".date_confirm_wrap").style.display="block",a.setAttribute("data-isconfirm",1),a.innerHTML="确认",r.innerHTML="返回修改";var s="",d="";t.hh&&(t.hh<0?d=s="时辰未知":(d=t.hh+"时",s=b("hh",t.hh)+"时")),i.innerHTML=t.yy+"年"+t.mm+"月"+t.dd+"日 "+d;var o=t._mm<0?b("rm",-t._mm):b("mm",t._mm);return n.innerHTML=t._yy+"年"+o+b("dd",t._dd)+" "+s,!1}f.trigger.setAttribute("data-date",t.yy+"-"+t.mm+"-"+t.dd),f.trigger.setAttribute("data-hour",t.hh);var l=f.trigger.getAttribute("data-toid-date"),c=f.trigger.getAttribute("data-toid-hour");l&&(document.getElementById(l).value=t.yy+"-"+t.mm+"-"+t.dd),c&&(document.getElementById(c).value=t.hh<0?"":t.hh);var m="";if(f.type){o=t._mm<0?b("rm",-t._mm):b("mm",t._mm);c&&(m=t.hh<0?"时辰未知":b("hh",t.hh)+"时"),f.trigger.value="农历:"+t._yy+"年"+o+b("dd",t._dd)+" "+m}else c&&(m=t.hh<0?"时辰未知":t.hh+"时"),f.trigger.value="公历:"+t.yy+"-"+t.mm+"-"+t.dd+" "+m;g(e,"finish")}function D(){var e=f.maxY-f.minY+1,t=parseInt(Math.round(f.gearDate.querySelector(".date_yy").getAttribute("val"))),a=t%e+f.minY,r=parseInt(Math.round(f.gearDate.querySelector(".date_mm").getAttribute("val")))+1,n=parseInt(Math.round(f.gearDate.querySelector(".date_dd").getAttribute("val")))+1,i=f.gearDate.querySelector(".date_hh")?1:0;if(i)if(f.options.enableUnknownHour)var s=parseInt(Math.round(f.gearDate.querySelector(".date_hh").getAttribute("val")))-1;else s=parseInt(Math.round(f.gearDate.querySelector(".date_hh").getAttribute("val")));var d=M[t].Intercalation?M[t].Intercalation:0;f.type&&d&&(d==r-1?r=-(r-1):d<r-1?r-=1:r=r);var o=u(f.type,a,r,n);if(f.type){f.trigger.setAttribute("data-type",1);r<0?b("rm",-r):b("mm",r);return i&&(s<0?"时辰未知":b("hh",s)+"时"),{yy:o.yy,mm:o.mm,dd:o.dd,_yy:a,_mm:r,_dd:n,hh:s}}f.trigger.setAttribute("data-type",0);return i&&(s<0?"时辰未知":s+"时"),{_yy:o.yy,_mm:o.mm,_dd:o.dd,yy:a,mm:r,dd:n,hh:s}}var r=!1,n=0;"ontouchstart"in window?(f.trigger.addEventListener("touchstart",function(e){n=Date.now()}),f.trigger.addEventListener("touchmove",function(e){r=!0}),f.trigger.addEventListener("touchend",function(e){!r&&Date.now()-n<150&&(e.preventDefault(),t()),r=!1,n=0})):f.trigger.addEventListener("click",function(){t()})}},e}();